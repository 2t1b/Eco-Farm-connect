app.config['SQLALCHEMY_DATABASE_URI'] = 'postgresql://eco_farm_connect_yoqg_user:AUscyWn2tE9XMEbV8AYSIZCUKwfFgS8S@dpg-ckgshcsldqrs73f48o90-a.oregon-postgres.render.com/pytheco_farm_connect_yoqg'
db = SQLAlchemy(app)

class jobs(db.Model):
    __tablename__ = 'jobs'
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(255))
    location = db.Column(db.String(255))
    price = db.Column(db.String(20))
    requirement = db.Column(db.Text)
    phone_number = db.Column(db.String(20))

engine = create_engine('postgresql://eco_farm_connect_yoqg_user:AUscyWn2tE9XMEbV8AYSIZCUKwfFgS8S@dpg-ckgshcsldqrs73f48o90-a.oregon-postgres.render.com/eco_farm_connect_yoqg')

from sqlalchemy import create_engine, MetaData, Table, Column, Integer, String, Float, text



engine = create_engine('postgresql://eco_jvoi_user:LUnZEDi0fIPIBqsBLE0hTy3TDjXAO6BN@dpg-cki1ggi12bvs738vatdg-a.oregon-postgres.render.com/eco_jvoi')

with engine.connect() as conn:
    result = conn.execute(text("select * from jobs"))
    print("type(result):", type(result))
    result_all = result.all()
    print("type(result.all()):", type(result_all))
  
result_dicts = []
for row in result_all:
    result_dict = dict(row._mapping)
    result_dicts.append(result_dict)
    print(result_dict)

    @app.route('/buyer', methods=[ 'GET','POST'])
def buy():
    jobs = Jobs(
        title=request.form.get('title'),
        location=request.form.get('location'),
        price=request.form.get('price'),
        requirement=request.form.get('requirement'),
        phone_number=request.form.get('phone_number')
    )
    db.session.add(jobs)
    db.session.commit()
    return render_template('list.html')